<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ethereum Transactions</title>
    <style>
        body {
            background-image: url('https://www.securities.io/wp-content/uploads/2022/04/Ethereum-Featured-3.jpg');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #ffffff;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
            color: #000000;
        }
        form {
            margin-bottom: 20px;
        }
        .form-container {
            width: 300px;
            margin-bottom: 20px;
        }
        .form-container label {
            display: block;
            width: 200px;
            float: left;
        }
        .form-container input[type="text"] {
            width: 100px;
            float: left;
        }
        .styled-button {
            background-color: #fff;
            color: #000;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
        }
        .styled-button:hover {
            background-color: #333;
            color: #fff;
        }
        .clearfix::after {
            content: "";
            clear: both;
            display: table;
        }
    </style>
</head>
<body>

<button form="fetch_transactions_form" class="styled-button">Fetch Latest Transactions</button>
<form id="fetch_transactions_form" method="post">
    <input type="hidden" name="fetch_transactions">
</form>

<div style="float:right;">
    <div class="form-container">
        <form method="post">
            <label for="address">Enter Address to predict:</label>
            <input type="text" id="address" name="address" required>
            <button type="submit" name="enter_address" class="styled-button">Check Address</button>
        </form>
    </div>

    <div class="form-container">
        <form method="post">
            <label for="hash">Enter Hash to predict:</label>
            <input type="text" id="hash" name="hash" required>
            <button type="submit" name="enter_hash" class="styled-button">Check Hash</button>
        </form>
    </div>

    <div class="form-container">
        <form method="post">
            <label for="address_50">Fetch Address Transactions:</label>
            <input type="text" id="address_50" name="address_50" required>
            <button type="submit" name="enter_address_50" class="styled-button">Fetch Transactions</button>
        </form>
    </div>

    <div class="form-container">
        <form method="post">
            <label for="transaction_count_address">Temporal Transaction Count:</label>
            <input type="text" id="transaction_count_address" name="transaction_count_address" required>
            <button type="submit" name="generate_transaction_count" class="styled-button">Generate Graph</button>
        </form>
    </div>
</div>



{% if transactions %}
    <h2>10 Latest Transactional hashes on Ethereum blockchain:</h2>
    <table>
        <tr>
            <th>Transaction Hash</th>
        </tr>
        {% for tx in transactions %}
        <tr>
            <td>{{ tx }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% if address_details %}
    <h2>Address Details:</h2>
    <table>
        <tr>
            <th>Detail</th>
            <th>Value</th>
        </tr>
        {% for key, value in address_details.items() %}
        <tr>
            <td>{{ key }}</td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% if transaction_details %}
    <h2>Transaction Details:</h2>
    <table>
        <tr>
            <th>Detail</th>
            <th>Value</th>
        </tr>
        {% for key, value in transaction_details.items() %}
        <tr>
            <td>{{ key }}</td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% if attempted_address_check %}
    {% if prediction_add == 0 %}
        <h2>Result:</h2>
        <p>Address is normal! Can make transactions.</p>
    {% elif prediction_add == 1 %}
        <h2>Result:</h2>
        <p>It is a fraud Wallet...! Be aware.</p>
    {% else %}
        <p>Invalid Prediction...! Try a different address.</p>
    {% endif %}
{% endif %}

{% if attempted_txn_check %}
    {% if prediction_txn == 0 %}
        <h2>Result:</h2>
        <p>Transaction is normal.</p>
    {% elif prediction_txn == 1 %}
        <h2>Result:</h2>
        <p>It is a fraud transaction.</p>
    {% else %}
        <p>Invalid Prediction...! Try a different transaction.</p>
    {% endif %}
{% endif %}

{% if past_50_transactions %}
    <h2>Past 50 Transactions for the Address:</h2>
    <table>
        <tr>
            <th>Transaction Hash</th>
            <th>Value</th>
            <th>Gas Price</th>
            <th>Timestamp</th>
        </tr>
        {% for tx in past_50_transactions %}
        <tr>
            <td>{{ tx['hash'] }}</td>
            <td>{{ tx['value'] }}</td>
            <td>{{ tx['gasPrice'] }}</td>
            <td>{{ tx['timestamp'] }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% if transaction_count_plot %}
    <h2>Number of Transactions Over Time:</h2>
    <img src="{{ transaction_count_plot }}" alt="Transaction Count Plot">
{% endif %}

{% if error_message %}
    <div style="color: red;">
        <strong>Error:</strong> {{ error_message }}
    </div>
{% endif %}

</body>
</html>
